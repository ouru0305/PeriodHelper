期末專案名稱：PeriodHelper
期末專案主題：生理週期紀錄、分析、預測

## 簡述
PeriodHelper幫助使用者更從容地掌握、面對生理週期。除了幫助使用者紀錄生理週期，也利用紀錄資料替使用者分析判斷生理週期是否規律、正常，預測下一次生理週期，並被動提供每日的小提醒。

## 目的說明
本專案的選題動機來自開發者的親身經驗，覺得目前生活中沒有理想的生理週期紀錄、預測管道，另外也常常容易忘記帶生理用品，因此決定開發本程式，幫助有生理週期的使用者紀錄、追蹤及計算自己的生理週期，並藉此瞭解自己的生理週期是否規律，進而探知自己的身體狀況。此外，本程式也希望藉由分析過往生理週期的模式預測下一個生理週期，讓使用者參考後能提早做準備或相關規劃，並藉由推估結果提供使用者每日的小提醒，提醒使用者當天是否要帶衛生棉等注意事項。

紀錄、追蹤與計算生理週期的方法有很多，包括紙筆記錄、運用網路上的計算器以及使用手機應用程式等。然而，生理週期計算複雜，若使用紙筆，使用者恐怕懶得進行精確的分析及推估；而網路上的計算器雖然運算快速，卻沒有掌握過往的生理週期，只用使用者印象中的週期平均值計算，預測精準度波動大；而下載手機應用程式雖然可以避免上面兩項問題，然而卻會把大量極度私人的資料交給第三方服務，令人有疑慮。這個程式有計算快速、鑑往知來的優點，而且將設計成單機作業，且做成能夠用密碼保護，並加密儲存資料，讓使用者能安心交付最私密的生理資訊。

## 功能介紹與如何達到功能說明

1. 設定密碼與輸入密碼
自定義make_pin()與check_pin()兩函式執行功能，
使用內建的open()函式讀取負責存取密碼的CSV檔，
並使用hashlib.md5()加密密碼資料。

第一次進入程式時，必須先設定密碼（四位數字）才能使用程式功能；
其他狀況，必須輸入正確密碼才能進入程式。
若密碼設定有誤或輸入有誤，將請使用者再輸入一次。本程式允許無限重複輸入。

程式互動畫面模擬：
===準備進入PeriodHelper===
請輸入密碼，或按enter離開：xxxx
密碼錯誤，請重新輸入！
請輸入密碼，或按enter離開：


2. 主功能列表與選擇功能
自定義main()函式負責印出主功能列，以及get_order()函式判斷使用者輸入內容對應到的功能。
功能與數字的對應關係是依照使用頻率設計，並非剛開始使用時的使用順序，因此接下來功能介紹將不會依照功能數字順序。

設定或輸入密碼成功後，使用者將進入主功能列，以鍵盤輸入選擇要使用的功能，
若輸入有誤，將請使用者再輸入一次。本程式允許無限重複輸入。

程式互動畫面模擬：
===PeriodHelper===
按1進入 今日的小提醒
按2進入 生理週期預測
按3進入 紀錄行經期日期
按4進入 生理週期規律程度分析
按5進入 生理週期歷史資料
按6進入 刪除資料
按7進入 更改密碼
按enter 離開程式、登出
選擇功能：ONE
輸入有誤喔！
選擇功能：


3.  紀錄行經期日期
自定義doc()函式執行功能，
大量使用datetime模組判斷日期是否輸入無誤（格式是否符合要求、開始日期是否早於結束日期、輸入時間區間是否與先前資料重疊等等），
使用sort_values()使資料照日期先後順序排列，
使用pandas.DataFrame將使用者輸入的內容與程式進一步計算得知的資料存入負責存取資料的CSV檔，並使用base64加密檔案。

本程式要求使用者以固定格式輸入行經期的開始與結束，確認使用者輸入日期無誤（格式是否符合要求、開始日期是否早於結束日期、輸入時間區間是否與先前資料重疊等等）後，進一步計算本次行經期長度與生理週期（指兩次行經期之間的區隔）長度，紀錄此四筆資料（紀錄終日期最早的資料，生理周期以0天計）。
若輸入有誤，將請使用者再輸入一次。本程式允許無限重複輸入。
紀錄完成後，本程式將在一秒後自動跳轉回到主功能列。

程式互動畫面模擬：
======紀錄行經期日期======
（格式：公元年份/月份/日期\n範例：2018/01/01）
提醒：按enter回到主功能列
 輸入開始日期：2018/12/01
 輸入結束日期：2018/11/01
開始日期不可在結束日期之後，請重新輸入！
 輸入開始日期：20181201
輸入有誤！請重新輸入！
 輸入開始日期：2018/12/01
 輸入結束日期：2018/12/05
==紀錄完成，即將自動主回到功能列。==
 

4. 生理週期規律程度分析
自定義analy()函式執行功能，自定義calc_res()函式負責數學計算，
自定義read()函式讀取與解碼負責存取資料的CSV檔。
使用檔案中資料進行計算，使用numpy中的.std()計算標準差，以及內建的.len()、.sum()函式計算平均值。

本程式提供分析全部資料或三個月內（以90天計）資料兩種選擇，
使用者以鍵盤輸入選擇，若輸入有誤，將請使用者再輸入一次。本程式允許無限重複輸入。
若輸入無誤，本程式將回報分析結果，
若使用者生理週期與行經期天數皆規律，本程式將回報規律程度分析、最近一次生理週期暨行經期長度分析、平均長度（生理週期相關計算不計入第一筆以0計的資料），
若使用者生理週期或行經期不規律，則不回報平均長度。
回報完畢後，本程式將提醒使用者主動按enter鍵回到主功能列。
若使用者選擇區間內無資料，將提醒使用者本程式因無資料而無法回報分析結果，並等待一秒後自動跳轉回到主功能列。

程式互動畫面模擬：
====生理週期規律程度分析====
選擇分析範圍：
1. 全部範圍
2. 近三個月（以90天計）內
或按enter回到主功能列
請輸入：2
>> 生理週期規律性分析結果：生理週期與行經期天數都規律。
>> 生理週期長度分析結果：生理週期天數和行經期天數都在普遍值內。（生理週期平均長度28天，行經期平均長度5天。）
===分析完畢，按enter回到主功能列===
>>


5. 生理週期歷史資料
自定義history()函式執行功能。
自定義read()函式讀取與解碼負責存取資料的CSV檔。

進入本功能後，本程式將依照特殊格式一次印出全部的歷史資料，
包含行經期開始日期、結束日期、行經期長度與生理週期長度四項資訊。
歷史資料呈現後，本程式將提醒使用者主動按enter鍵回到主功能列。

程式互動畫面模擬：
============歷史資料============
1:2018/08/01-2018/08/19, 行經期19天, 生理週期0天
2:2018/10/15-2018/10/20, 行經期6天, 生理週期75天
3:2018/11/10-2018/11/11, 行經期2天, 生理週期26天
4:2018/12/01-2018/12/15, 行經期15天, 生理週期21天
===資料結束，按enter回到主功能列===
>>

6. 刪除資料
自定義delete()函式執行功能。自定義read()函式讀取與解碼負責存取資料的CSV檔。
使用pandas.DataFrame將更改後的內容再寫入CSV檔。

進入本功能後，本程式將依照特殊格式一次印出全部的歷史資料，
包含行經期開始日期、結束日期、行經期長度與生理週期長度四項資訊。
資料呈現後，使用者可以用鍵盤輸入要刪除的資料項，若輸入有誤，將請使用者再輸入一次。本程式允許無限重複輸入。
若輸入無誤，本功能將刪除該筆資料，重新整理餘下資料存入檔案，並印出更新後資料讓使用者確認。
進入本功能一次僅能刪除一項資料，印出更新後資料後，本程式將提醒使用者主動按enter鍵回到主功能列。

程式互動畫面模擬：
========歷史資料========
1:2018/08/01-2018/08/19, 行經期19天, 生理週期0天
2:2018/10/15-2018/10/20, 行經期6天, 生理週期75天
3:2018/11/10-2018/11/11, 行經期2天, 生理週期26天
4:2018/12/01-2018/12/15, 行經期15天, 生理週期21天
========資料結束========
輸入欲刪除的資料代碼，或按enter回到主功能列：1
資料已更新！
===========更新後資料============
1:2018/10/15-2018/10/20, 行經期6天, 生理週期0天
2:2018/11/10-2018/11/11, 行經期2天, 生理週期26天
3:2018/12/01-2018/12/15, 行經期15天, 生理週期21天
===資料結束，按enter回到主功能列===
>>

========歷史資料========
1:2018/10/15-2018/10/20, 行經期6天, 生理週期0天
2:2018/11/10-2018/11/11, 行經期2天, 生理週期26天
3:2018/12/01-2018/12/15, 行經期15天, 生理週期21天
========資料結束========
輸入欲刪除的資料代碼，或按enter回到主功能列：2
資料已更新！
===========更新後資料============
1:2018/10/15-2018/10/20, 行經期6天, 生理週期0天
2:2018/12/01-2018/12/15, 行經期15天, 生理週期47天
===資料結束，按enter回到主功能列===
>>


7. 生理週期預測
自定義pred()函式執行功能。自定義read()函式讀取與解碼負責存取資料的CSV檔。
依檔案內三個月（以90天計）內資料預測下一次行經期與排卵期時間。

進入本功能後，依檔案內三個月（以90天計）內資料預測下一次行經期與排卵期時間，
依照特殊格式印出供使用者參考，並提醒使用者本程式預測功能之侷限；
預測結果呈現後，本程式將提醒使用者主動按enter鍵回到主功能列。
若檔案中無三個月內資料，本程式將提醒使用者本程式因無資料而無法回報分析結果，並等待一秒後自動跳轉回到主功能列。

程式互動畫面模擬：
預測結果:
            排卵期：2018-12-30～2019-01-07
            行經期：2019-01-17～2019-01-21
*此預測結果僅供參考。
*生理週期、行經期天數不規律及資料紀錄不完整都會影響預測準確性。
===預測完畢，按enter回到主功能列===


8. 今日的小提醒
自定義reminder()函式執行功能。自定義read()函式讀取與解碼負責存取資料的CSV檔。
reminder()函式先取得pred()的預測資料，比對由datetime.date.today()取得的當日日期，
瞭解當日是否為使用者行經期剛結束、排卵期、行經期將至、行經期，或者以上皆非，
以此為依據生成小提醒內容。

進入本功能後，本程式將呈現小提醒內容，並在呈現後提醒使用者主動按enter鍵回到主功能列。
若檔案中無三個月內資料，本程式將提醒使用者本程式因無資料而無法生成小提醒內容，並等待一秒後自動跳轉回到主功能列。

程式互動畫面模擬：
==========今日的小提醒==========
今天可能是行經期，辛苦囉！記得帶衛生棉、多休息、多吃綠色蔬菜。
如果行經期沒有如期到來，要多休息、注意保暖、少吃生冷食物，多運動也會有幫助！
===知道了，按enter回到主功能列===
>>

9. 更改密碼
change_pin()函數執行功能，使用內建的open()函式讀取負責存取密碼的CSV檔，
並使用hashlib.md5()加密密碼資料。

進入本功能後，必須先輸入原密碼，原密碼輸入無誤，則可設定新密碼。
若輸入原密碼與新密碼有誤，將請使用者再輸入一次。本程式允許無限重複輸入。
新密碼不可與原密碼相同。
若設定新密碼成功，則本程式將等待一秒後自動跳轉回到主功能列。

程式互動畫面模擬：
請輸入原密碼，或按enter離開：0000
重新設定，請設定四位數字密碼，或按enter離開
密碼：1234
==更改成功！即將自動回到主功能列。==


## 未來開發計畫

* 將使用者互動方式改成圖形化使用者介面。

* 在取得一定數量的週期資訊後，使用機器學習的方式預測使用者的未來生理週期。

* 加入「生理週期十全大補」聊天機器人功能，回答使用者關於生理週期的疑難雜症。
